generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ad_analytics {
  id                                 BigInt    @id @default(autoincrement())
  ad_archive_id                      BigInt    @unique(map: "ad_analytics_ad_archive_id_idx")
  page_id                            BigInt
  targets_eu                         Int       @default(0) @db.SmallInt
  location_audience                  Json?     @db.Json
  gender_audience                    String    @default("Unknown") @db.VarChar(255)
  age_audience                       Json?     @db.Json
  eu_total_reach                     Int       @default(0)
  age_country_gender_reach_breakdown Json?
  payer_beneficiary_data             Json?     @db.Json
  has_violating_payer_beneficiary    Int       @default(0) @db.SmallInt
  is_ad_taken_down                   Int       @default(0) @db.SmallInt
  violation_types                    Json?     @db.Json
  verified_voice_context             Json?     @db.Json
  created_at                         DateTime? @db.Timestamp(6)
  updated_at                         DateTime? @db.Timestamp(6)

  @@index([age_country_gender_reach_breakdown], map: "ad_analytics_age_ctry_gndr_reach_gin", type: Gin)
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model ad {
  id               BigInt    @id @default(autoincrement())
  adArchiveId      BigInt    @unique(map: "ads_ad_archeive_id_unique") @map("ad_archive_id")
  title            String
  description      String?
  isActive         Int       @default(0) @map("is_active")
  isAaa            Int       @default(0) @map("is_aaa")
  targetUrl        String?   @map("target_url")
  ctaText          String?   @map("cta_text")
  type             String
  imageLink        String?   @map("image_link")
  videoLink        String?   @map("video_link")
  videoPreviewLink String?   @map("video_preview_link")
  pageId           BigInt    @map("page_id")
  pageName         String    @map("page_name")
  startDate        DateTime? @map("start_date")
  endDate          DateTime? @map("end_date")
  platform         String?
  createdAt        DateTime? @map("created_at")
  updatedAt        DateTime? @map("updated_at")
  shopId           BigInt?   @map("shop_id")
  adCreativeId     BigInt?   @map("ad_creative_id")
  randomToken      Float?    @map("random_token")

  @@index([isActive, createdAt], map: "ads_active_created_at_index")
  @@index([createdAt], map: "ads_created_at_index")
  @@index([pageId], map: "ads_page_id_index")
  @@index([shopId], map: "ads_shop_id_idx")
  @@index([isActive, createdAt], map: "idx_ads_active_created_perf")
  @@index([createdAt], map: "idx_ads_created_at")
  @@index([startDate, id], map: "idx_ads_start_date_id_perf")
  @@map("ads")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model api_usage_logs {
  id                  BigInt    @id @default(autoincrement())
  service             String    @db.VarChar(255)
  endpoint            String?   @db.VarChar(255)
  user_id             BigInt?
  response_time_ms    Int?
  status              String    @default("success") @db.VarChar(255)
  response_size_bytes BigInt?
  error_message       String?
  created_at          DateTime? @db.Timestamp(0)
  updated_at          DateTime? @db.Timestamp(0)

  @@index([service, created_at], map: "api_usage_logs_service_created_at_index")
  @@index([service], map: "api_usage_logs_service_index")
  @@index([status, created_at], map: "api_usage_logs_status_created_at_index")
  @@index([status], map: "api_usage_logs_status_index")
  @@index([user_id], map: "api_usage_logs_user_id_index")
}

model blacklist_shops {
  id          BigInt    @id @default(autoincrement())
  url         String    @db.VarChar(255)
  leaderboard Int       @db.SmallInt
  tracking    Int       @db.SmallInt
  product     Int       @db.SmallInt
  theme       Int       @db.SmallInt
  top_product Int       @db.SmallInt
  top_ads     Int       @db.SmallInt
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)

  @@index([url, top_product], map: "idx_blacklist_shops_url_top_product")
  @@index([url, top_product], map: "idx_blacklist_url_topproduct")
}

model category {
  id             BigInt         @id @default(autoincrement())
  name           Json
  parentId       BigInt?        @map("parent_id")
  createdAt      DateTime?      @map("created_at")
  updatedAt      DateTime?      @map("updated_at")

  shopCategories shopCategory[]

  @@map("categories")
}

model cron_errors {
  id             BigInt    @id @default(autoincrement())
  error_happened Boolean   @default(false)
  error_message  String?
  command_name   String?   @db.VarChar(255)
  created_at     DateTime? @db.Timestamp(0)
  updated_at     DateTime? @db.Timestamp(0)
}

model daily_top_products {
  id                Int       @id @default(autoincrement())
  shop_id           Int?
  type              Int
  uuid              String
  shop_url          String
  estimated_order   Int
  last_month_visits Int?
  currency          String
  country           String?
  locale            String?
  scale             Int
  estimated_monthly Int
  img_src           String
  title             String
  product_handle    String
  price             Int
  created_at        DateTime
  updated_at        DateTime
  growth_rate       Int?
  whois_at          DateTime?
  active_ads_count  Int?

  @@index([created_at])
  @@index([type])
  @@index([updated_at])
  @@index([uuid])
}

model daily_top_shops {
  id                Int       @id @default(autoincrement())
  shop_id           Int?
  type              Int
  uuid              String
  shop_url          String
  merchant_name     String?
  estimated_order   Int
  currency          String
  country           String?
  locale            String?
  estimated_monthly Int
  img_src           String
  last_month_visits Int?
  products_count    Int?
  created_at        DateTime
  updated_at        DateTime
  growth_rate       Int?
  whois_at          DateTime?
  main_source       String?
  active_ads_count  Int?

  @@index([created_at])
  @@index([type])
  @@index([updated_at])
  @@index([uuid])
}

model discounts {
  id                  BigInt    @id @default(autoincrement())
  code                String    @db.VarChar(255)
  stripe_id           String    @db.VarChar(255)
  percentage_discount Int
  nb_used             Int       @default(0)
  auto_discount       Int       @db.SmallInt
  created_at          DateTime? @db.Timestamp(6)
  updated_at          DateTime? @db.Timestamp(6)
}

model facebook_ads {
  id                                 BigInt    @id @default(autoincrement())
  ad_archive_id                      BigInt?
  collation_id                       BigInt?
  collation_count                    Int?
  title                              String?   @db.VarChar(255)
  desc                               String?
  formatted_url                      String?
  target_url                         String?
  cta_text                           String?   @db.VarChar(255)
  type                               String?   @db.VarChar(255)
  image_link                         String?
  video_link                         String?
  video_preview                      String?
  page_id                            BigInt?
  page_name                          String?   @db.VarChar(255)
  page_verification                  String?   @db.VarChar(255)
  page_likes                         Int?
  start_date                         DateTime? @default(now()) @db.Timestamp(6)
  publisher_platform                 Json?     @db.Json
  age_audience                       Json?     @db.Json
  age_country_gender_reach_breakdown Json?     @db.Json
  most_targeted_age_range            String?   @db.VarChar(255)
  gender_with_most_spend             String?   @db.VarChar(255)
  eu_total_reach                     Int?
  created_at                         DateTime? @db.Timestamp(6)
  updated_at                         DateTime? @db.Timestamp(6)
  deleted_at                         DateTime? @db.Timestamp(6)
  scraped                            Int       @default(0) @db.SmallInt
}

model facebook_ads_browsers {
  id                     BigInt    @id @default(autoincrement())
  ads_id                 BigInt
  call_to_action         String    @db.VarChar(255)
  call_to_action_url     String
  creative               String    @db.VarChar(255)
  thumbnail              String
  video_preview          String?
  video_length           BigInt?
  ad_text                String?
  domain                 String    @db.VarChar(255)
  domain_url             String    @db.VarChar(255)
  ad_headline            String?
  ad_description         String?
  post_url               String
  comments_count         BigInt
  shares_count           BigInt
  likes_count            BigInt
  views_count            BigInt
  advertiser_id          BigInt
  advertiser_name        String    @db.VarChar(255)
  advertiser_icon_url    String
  advertiser_is_verified String
  posted_at              DateTime  @db.Timestamp(6)
  created_at             DateTime? @db.Timestamp(6)
  updated_at             DateTime? @db.Timestamp(6)
}

model failed_jobs {
  id         BigInt   @id @default(autoincrement())
  connection String
  queue      String
  payload    String
  exception  String
  failed_at  DateTime @default(now()) @db.Timestamp(6)
}

model favorite {
  id        BigInt    @id @default(autoincrement())
  userId    BigInt    @map("user_id")
  adId      BigInt    @map("ad_id")
  createdAt DateTime? @map("created_at")
  updatedAt DateTime? @map("updated_at")

  @@index([adId], map: "favorites_ad_id_idx")
  @@index([userId], map: "favorites_user_id_idx")
  @@map("favorites")
}

model fb_pages {
  id                                           BigInt    @id @default(autoincrement())
  page_id                                      BigInt    @unique(map: "fb_pages_page_id_idx")
  page_name                                    String?   @db.VarChar(255)
  profile_photo                                String?
  about_text                                   String?
  page_likes                                   BigInt    @default(0)
  page_category                                String?   @db.VarChar(255)
  page_verification                            String    @default("NOT_VERIFIED") @db.VarChar(255)
  is_delegate_page_with_linked_primary_profile Int       @default(0) @db.SmallInt
  is_profile_page                              Int       @default(0) @db.SmallInt
  page_is_deleted                              Int       @default(0) @db.SmallInt
  page_is_restricted                           Int       @default(0) @db.SmallInt
  page_cover_photo                             String?
  page_profile_uri                             String?
  ig_username                                  String?   @db.VarChar(255)
  ig_followers                                 Int       @default(0)
  ig_verification                              Int       @default(0) @db.SmallInt
  targets_eu                                   Int       @default(0) @db.SmallInt
  location_audience                            Json?     @db.Json
  gender_audience                              String?   @db.VarChar(255)
  age_audience                                 Json?     @db.Json
  eu_total_reach                               Int       @default(0)
  age_country_gender_reach_breakdown           Json?     @db.Json
  payer_beneficiary_data                       Json?     @db.Json
  has_violating_payer_beneficiary              Int       @default(0) @db.SmallInt
  is_ad_taken_down                             Int       @default(0) @db.SmallInt
  violation_types                              Json?     @db.Json
  verified_voice_context                       Json?     @db.Json
  created_at                                   DateTime? @db.Timestamp(6)
  updated_at                                   DateTime? @db.Timestamp(6)
}

model feedback {
  id         BigInt    @id @default(autoincrement())
  user_id    BigInt
  message    String
  rating     Int?
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)

  @@index([user_id])
}

model funnel_diagnostics {
  id                     BigInt    @id @default(autoincrement())
  user_id                BigInt
  start_date             DateTime  @db.Date
  end_date               DateTime  @db.Date
  ad_spend               Decimal   @db.Decimal
  platform               String
  hook_rate              Decimal   @db.Decimal
  hook_rate_status       String
  hold_rate              Decimal   @db.Decimal
  hold_rate_status       String
  ctr                    Decimal   @db.Decimal
  ctr_status             String
  cpc                    Decimal   @db.Decimal
  cpc_status             String
  traffic                Int
  atc_rate               Decimal   @db.Decimal
  atc_rate_status        String
  checkout_rate          Decimal   @db.Decimal
  checkout_rate_status   String
  conversion_rate        Decimal   @db.Decimal
  conversion_rate_status String
  ad_duration_hours      Int
  is_test_valid          Boolean
  diagnosis              String
  explanation            String
  action                 String
  created_at             DateTime?
  updated_at             DateTime?
  score                  String?
  decision               String?
}

model generate_products {
  id                  BigInt    @id @default(autoincrement())
  user_id             BigInt
  shop_url            String
  product_name        String
  product_description String?
  category            String?
  created_at          DateTime?
  updated_at          DateTime?
  language            String?
  product_id          String?
  aicontent           Json?
  product_content     Json?
  source              String    @default("aliexpress")
  type                String    @default("store")
  ai_generated_images Json?
  feedback_received   Boolean   @default(false)

  @@index([category, created_at], map: "idx_generate_products_category_created")
  @@index([user_id, created_at], map: "idx_generate_products_user_created")
}

model generateStore {
  id                 BigInt    @id @default(autoincrement())
  userId             BigInt    @map("user_id")
  storeName          String    @map("store_name")
  niche              String?
  storeDescription   String?   @map("store_description")
  createdAt          DateTime? @map("created_at")
  updatedAt          DateTime? @map("updated_at")
  generatedProductId BigInt?   @map("generated_product_id")
  themeId            String?   @map("theme_id")
  importType         String?   @map("import_type")
  licenseId          BigInt?   @map("license_id")
  licenseKey         String?   @map("license_key")

  @@index([niche, createdAt], map: "idx_generate_stores_niche_created")
  @@index([userId, createdAt], map: "idx_generate_stores_user_created")
  @@map("generate_stores")
}

model hoox_script_requests {
  id                   BigInt    @id @default(autoincrement())
  user_id              BigInt?
  source               String    @default("hooxvideo") @db.VarChar(255)
  prompt               String?
  duration             Int?
  primary_url          String?   @db.VarChar(1024)
  primary_domain       String?   @db.VarChar(255)
  urls                 Json?     @db.Json
  success              Boolean   @default(false)
  response_script      String?
  response_suggestions Json?     @db.Json
  response_images      Json?     @db.Json
  raw_response         Json?     @db.Json
  error_message        String?
  created_at           DateTime? @db.Timestamp(0)
  updated_at           DateTime? @db.Timestamp(0)

  @@index([primary_domain], map: "hoox_script_requests_primary_domain_index")
  @@index([user_id], map: "hoox_script_requests_user_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model hoox_videos {
  id                 BigInt    @id @default(autoincrement())
  user_id            BigInt
  job_id             String    @unique(map: "hoox_videos_job_id_unique")
  export_job_id      String?
  title              String
  script             String
  format             String
  language           String?
  voice              String
  avatar             String?
  style              String?
  duration           Int       @default(60)
  enable_subtitles   Boolean   @default(true)
  enable_transitions Boolean   @default(true)
  media_search       Boolean   @default(true)
  animation_style    String?
  status             String    @default("pending")
  progress           Int       @default(0)
  preview_url        String?
  download_url       String?
  export_quality     String?
  export_format      String?
  metadata           Json?
  started_at         DateTime?
  completed_at       DateTime?
  exported_at        DateTime?
  created_at         DateTime?
  updated_at         DateTime?
  video_id           String?
  cost               Decimal?  @db.Decimal

  @@index([created_at], map: "hoox_videos_created_at_index")
  @@index([status], map: "hoox_videos_status_index")
  @@index([user_id], map: "hoox_videos_user_id_index")
  @@index([video_id], map: "hoox_videos_video_id_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model imageGeneration {
  id           BigInt    @id @default(autoincrement())
  userId       BigInt    @map("user_id")
  predictionId String?   @map("prediction_id")
  inputImage   String    @map("input_image")
  parameters   Json?
  outputImages Json?     @map("output_images")
  status       String    @default("processing")
  error        String?
  completedAt  DateTime? @map("completed_at")
  createdAt    DateTime? @map("created_at")
  updatedAt    DateTime? @map("updated_at")

  @@index([createdAt], map: "image_generations_created_at_index")
  @@index([predictionId], map: "image_generations_prediction_id_index")
  @@index([status], map: "image_generations_status_index")
  @@index([userId], map: "image_generations_user_id_index")
  @@map("image_generations")
}

model invoice {
  id               BigInt    @id @default(autoincrement())
  userId           BigInt    @map("user_id")
  stripeId         String    @unique(map: "invoices_stripe_id_unique") @map("stripe_id")
  stripeCustomerId String?   @map("stripe_customer_id")
  subscriptionId   String?   @map("subscription_id")
  amountPaid       BigInt    @default(0) @map("amount_paid")
  amountDue        BigInt    @default(0) @map("amount_due")
  subtotal         BigInt    @default(0)
  total            BigInt    @default(0)
  tax              BigInt?
  currency         String    @default("usd")
  status           String    @default("draft")
  invoicePdf       String?   @map("invoice_pdf")
  hostedInvoiceUrl String?   @map("hosted_invoice_url")
  number           String?
  periodStart      DateTime? @map("period_start")
  periodEnd        DateTime? @map("period_end")
  stripeCreated    DateTime? @map("stripe_created")
  metadata         String?
  lines            String?
  createdAt        DateTime? @map("created_at")
  updatedAt        DateTime? @map("updated_at")

  @@index([status], map: "invoices_status_index")
  @@index([stripeCreated], map: "invoices_stripe_created_index")
  @@index([stripeCustomerId], map: "invoices_stripe_customer_id_index")
  @@index([userId], map: "invoices_user_id_index")
  @@map("invoices")
}

model jobs {
  id           BigInt  @id @default(autoincrement())
  queue        String  @db.VarChar(255)
  payload      String
  attempts     Int
  reserved_at  BigInt?
  available_at BigInt
  created_at   BigInt

  @@index([queue])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model license_keys {
  id             BigInt    @id @default(autoincrement())
  user_id        BigInt
  license_key    String    @unique(map: "license_keys_license_key_unique")
  domain         String?
  status         String    @default("active")
  expires_at     DateTime?
  created_at     DateTime?
  updated_at     DateTime?
  shopify_domain String?

  @@index([license_key, domain], map: "license_keys_license_key_domain_index")
  @@index([shopify_domain], map: "license_keys_shopify_domain_index")
  @@index([user_id, status], map: "license_keys_user_id_status_index")
}

model ltm_translations {
  id         BigInt    @id @default(autoincrement())
  status     Int       @default(0)
  locale     String    @db.VarChar(255)
  group      String    @db.VarChar(255)
  key        String
  value      String?
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model migrations {
  id        BigInt @id @default(autoincrement())
  migration String @db.VarChar(255)
  batch     Int
}

model model_has_permissions {
  permission_id BigInt
  model_type    String @db.VarChar(255)
  model_id      BigInt

  @@id([permission_id, model_id, model_type])
  @@index([model_id, model_type], map: "model_has_permissions_model_id_model_type_index")
}

model model_has_roles {
  role_id    BigInt
  model_type String @db.VarChar(255)
  model_id   BigInt

  @@id([role_id, model_id, model_type])
  @@index([model_id, model_type], map: "model_has_roles_model_id_model_type_index")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model password_resets {
  email      String    @db.VarChar(255)
  token      String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(6)

  @@index([email])
  @@ignore
}

model permissions {
  id         BigInt    @id @default(autoincrement())
  name       String    @db.VarChar(255)
  guard_name String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)

  @@unique([name, guard_name], map: "permissions_name_guard_name_unique")
}

model plan {
  id                   BigInt    @id @default(autoincrement())
  title                String
  price                Float
  dayFreeTrial         Int       @default(0) @map("day_free_trial")
  info                 String?
  identifier           String    @unique
  stripeId             String    @unique @map("stripe_id")
  stripeIdEn           String    @unique @map("stripe_id_en")
  leaderboardShop      Int       @map("leaderboard_shop")
  limitShopTracker     Int       @map("limit_shop_tracker")
  limitShopExporter    Int       @map("limit_shop_exporter")
  limitProductExporter Int       @map("limit_product_exporter")
  topShopsCount        Int?      @map("top_shops_count")
  topProductsCount     Int?      @map("top_products_count")
  createdAt            DateTime? @map("created_at")
  updatedAt            DateTime? @map("updated_at")
  limitGenerateProduct Int       @default(0) @map("limit_generate_product")
  limitImportTheme     Int       @default(0) @map("limit_import_theme")
  topAdsCount          Int?      @map("top_ads_count")
  maxLicenses          Int       @default(1) @map("max_licenses")
  limitVideoGeneration Int       @default(0) @map("limit_video_generation")
  limitImageGeneration Int       @default(0) @map("limit_image_generation")

  @@map("plans")
}

model product_discovers {
  id           BigInt    @id @default(autoincrement())
  scrapping_id String
  content      Json      @db.Json
  created_at   DateTime? @db.Timestamp(6)
  updated_at   DateTime? @db.Timestamp(6)
}

model productExport {
  id           BigInt    @id @default(autoincrement())
  userId       BigInt    @map("user_id")
  shopUrl      String    @map("shop_url")
  merchantName String?   @map("merchant_name")
  screenshot   String?
  nbProduct    Int       @map("nb_product")
  translation  String
  file         String
  zipFile      String?   @map("zip_file")
  productUrl   String?   @map("product_url")
  createdAt    DateTime? @map("created_at")
  updatedAt    DateTime? @map("updated_at")

  @@index([createdAt], map: "product_exports_created_at_index")
  @@index([shopUrl], map: "product_exports_shop_url_index")
  @@index([userId], map: "product_exports_user_id_idx")
  @@map("product_exports")
}

model productImage {
  id        BigInt    @id @default(autoincrement())
  productId BigInt    @map("product_id")
  src       String
  width     Int
  height    Int
  position  Int
  createdAt DateTime? @map("created_at")
  updatedAt DateTime? @map("updated_at")

  product   product   @relation(fields: [productId], references: [id])

  @@index([productId], map: "product_images_product_id_index")
  @@map("product_images")
}

model product_options {
  id         BigInt    @id @default(autoincrement())
  product_id BigInt
  name       String
  position   Int
  values     Json
  created_at DateTime?
  updated_at DateTime?

  @@index([product_id], map: "product_options_product_id_index")
}

model productVariant {
  id               BigInt    @id @default(autoincrement())
  productId        BigInt    @map("product_id")
  variantId        BigInt    @map("variant_id")
  title            String    @db.VarChar(255)
  option1          String?
  option2          String?
  option3          String?
  sku              String?
  requiresShipping Boolean   @default(true) @map("requires_shipping")
  taxable          Boolean   @default(false)
  price            Decimal   @db.Decimal(20, 10)
  grams            BigInt    @default(0)
  createdAt        DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt        DateTime? @map("updated_at") @db.Timestamp(0)

  product          product   @relation(fields: [productId], references: [id])

  @@index([price], map: "product_variants_price_index")
  @@index([productId], map: "product_variants_product_id_index")
  @@index([variantId], map: "product_variants_variant_id_index")
  @@map("product_variants")
}

model product {
  id          BigInt    @id @default(autoincrement())
  shopId      BigInt    @map("shop_id")
  productId   BigInt    @map("product_id")
  title       String    @db.VarChar(255)
  bestProduct Boolean   @default(false) @map("best_product")
  handle      String    @db.VarChar(255)
  bodyHtml    String?   @map("body_html")
  publishedAt DateTime? @map("published_at") @db.Timestamp(0)
  vendor      String?   @db.VarChar(255)
  productType String?   @map("product_type") @db.VarChar(255)
  tags        Json?     @db.Json
  createdAt   DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(0)
  sort        Int?

  shop        shop             @relation(fields: [shopId], references: [id])
  variants    productVariant[]
  images      productImage[]

  @@unique([shopId, productId], map: "products_unique_shop_id_product_id")
  @@index([createdAt], map: "idx_products_created_at")
  @@index([bestProduct], map: "products_best_product_index")
  @@index([productId], map: "products_product_id_index")
  @@index([shopId], map: "products_shop_id_index")
  @@map("products")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model roadmap_items {
  id          BigInt    @id @default(autoincrement())
  title       String    @db.VarChar(255)
  description String
  section     String    @db.VarChar(255)
  order       Int       @default(0)
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
}

model role_has_permissions {
  permission_id BigInt
  role_id       BigInt

  @@id([permission_id, role_id])
}

model roles {
  id         BigInt    @id @default(autoincrement())
  name       String    @db.VarChar(255)
  guard_name String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)

  @@unique([name, guard_name], map: "roles_name_guard_name_unique")
}

model savedSearch {
  id               BigInt    @id @default(autoincrement())
  userId           BigInt    @map("user_id")
  modelName        String    @map("model_name") @db.VarChar(255)
  searchParameters Json      @map("search_parameters") @db.Json
  name             String    @db.VarChar(255)
  createdAt        DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime? @map("updated_at") @db.Timestamp(6)

  @@index([userId], map: "saved_searches_user_id_idx")
  @@map("saved_searches")
}

model sessions {
  id            String  @id @db.VarChar(255)
  user_id       BigInt?
  ip_address    String? @db.VarChar(45)
  user_agent    String?
  payload       String
  last_activity Int

  @@index([last_activity])
  @@index([user_id])
}

model settings {
  id         BigInt    @id @default(autoincrement())
  name       String    @db.VarChar(255)
  label      String    @db.VarChar(255)
  value      String
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
}

model shared_shops {
  id            BigInt    @id @default(autoincrement())
  user_share_id BigInt
  shop_id       BigInt
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)

  @@unique([user_share_id, shop_id], map: "shared_shops_user_share_id_shop_id_unique")
}

model shop_ads_filter_settings {
  id                    BigInt    @id @default(autoincrement())
  name                  String    @db.VarChar(255)
  filter_active_ads     String?   @db.VarChar(255)
  filter_all_ads        String?   @db.VarChar(255)
  filter_fb_pages       String?   @db.VarChar(255)
  filter_user_shops     String?   @db.VarChar(255)
  created_from          DateTime? @db.Date
  created_to            DateTime? @db.Date
  updated_from          DateTime? @db.Date
  updated_to            DateTime? @db.Date
  ads_updated_from      DateTime? @db.Date
  ads_updated_to        DateTime? @db.Date
  url                   String?   @db.VarChar(255)
  has_saved_ads         String?   @db.VarChar(255)
  deep_search           Boolean   @default(false)
  autostart             Boolean   @default(false)
  estimated_shops_count Int       @default(0)
  last_run_at           DateTime? @db.Timestamp(0)
  created_at            DateTime? @db.Timestamp(0)
  updated_at            DateTime? @db.Timestamp(0)
}

model shop_apps_filter_settings {
  id                    BigInt    @id @default(autoincrement())
  name                  String    @db.VarChar(255)
  filter_has_apps       String?   @db.VarChar(255)
  filter_app_count      String?   @db.VarChar(255)
  filter_specific_app   String?   @db.VarChar(255)
  filter_user_shops     String?   @db.VarChar(255)
  created_from          DateTime? @db.Date
  created_to            DateTime? @db.Date
  updated_from          DateTime? @db.Date
  updated_to            DateTime? @db.Date
  url                   String?   @db.VarChar(255)
  deep_search           Boolean   @default(false)
  autostart             Boolean   @default(false)
  estimated_shops_count Int       @default(0)
  last_run_at           DateTime? @db.Timestamp(0)
  created_at            DateTime? @db.Timestamp(0)
  updated_at            DateTime? @db.Timestamp(0)
}

model shop_chat_messages {
  id           BigInt    @id @default(autoincrement())
  user_id      BigInt
  shop_id      BigInt
  user_message String
  ai_response  String?
  status       String    @default("success") @db.VarChar(255)
  intent       String?   @db.VarChar(255)
  ip_address   String?   @db.VarChar(255)
  created_at   DateTime? @db.Timestamp(0)
  updated_at   DateTime? @db.Timestamp(0)

  @@index([shop_id, created_at], map: "shop_chat_messages_shop_id_created_at_index")
  @@index([shop_id], map: "shop_chat_messages_shop_id_index")
  @@index([user_id, created_at], map: "shop_chat_messages_user_id_created_at_index")
  @@index([user_id], map: "shop_chat_messages_user_id_index")
}

model shop_refresh_filter_settings {
  id                    BigInt    @id @default(autoincrement())
  name                  String    @db.VarChar(255)
  filter_user_shops     String?   @db.VarChar(255)
  created_from          DateTime? @db.Date
  created_to            DateTime? @db.Date
  updated_from          DateTime? @db.Date
  updated_to            DateTime? @db.Date
  url                   String?   @db.VarChar(255)
  autostart             Boolean   @default(false)
  estimated_shops_count Int       @default(0)
  last_run_at           DateTime? @db.Timestamp(0)
  created_at            DateTime? @db.Timestamp(0)
  updated_at            DateTime? @db.Timestamp(0)
}

model shop_storeleads_data {
  id             BigInt    @id @default(autoincrement())
  shop_id        BigInt    @unique(map: "shop_storeleads_data_shop_id_unique")
  raw_json       Json?
  categories     Json?
  last_synced_at DateTime? @db.Timestamp(0)
  created_at     DateTime? @db.Timestamp(0)
  updated_at     DateTime? @db.Timestamp(0)

  @@index([last_synced_at], map: "shop_storeleads_data_last_synced_at_index")
}

model shop_themes {
  id             BigInt    @id @default(autoincrement())
  shop_id        BigInt    @unique(map: "shop_themes_shop_id_unique")
  name           String?   @db.VarChar(255)
  version        String?   @db.VarChar(255)
  author         String?   @db.VarChar(255)
  theme_id       String?   @db.VarChar(255)
  is_custom      Boolean   @default(false)
  last_synced_at DateTime? @db.Timestamp(0)
  created_at     DateTime? @db.Timestamp(0)
  updated_at     DateTime? @db.Timestamp(0)

  @@index([author], map: "shop_themes_author_index")
  @@index([is_custom], map: "shop_themes_is_custom_index")
  @@index([last_synced_at], map: "shop_themes_last_synced_at_index")
  @@index([name], map: "shop_themes_name_index")
}

model shop_traffic_filter_settings {
  id                    BigInt    @id @default(autoincrement())
  name                  String    @db.VarChar(255)
  filter_visits         String?   @db.VarChar(255)
  filter_growth_rate    String?   @db.VarChar(255)
  filter_trend          String?   @db.VarChar(255)
  filter_countries      String?   @db.VarChar(255)
  filter_sources        String?   @db.VarChar(255)
  created_from          DateTime? @db.Date
  created_to            DateTime? @db.Date
  updated_from          DateTime? @db.Date
  updated_to            DateTime? @db.Date
  url                   String?   @db.VarChar(255)
  deep_search           Boolean   @default(false)
  autostart             Boolean   @default(false)
  estimated_shops_count Int       @default(0)
  last_run_at           DateTime? @db.Timestamp(0)
  created_at            DateTime? @db.Timestamp(0)
  updated_at            DateTime? @db.Timestamp(0)
  filter_user_shops     String?   @db.VarChar(255)
}

model shop_traffic_monthly {
  id                BigInt    @id @default(autoincrement())
  shop_id           BigInt
  month             DateTime  @db.Date
  visits            BigInt?
  estimated_monthly BigInt?
  created_at        DateTime? @db.Timestamp(0)
  updated_at        DateTime? @db.Timestamp(0)

  @@unique([shop_id, month], map: "shop_traffic_monthly_unique_month")
  @@index([month], map: "shop_traffic_monthly_month_index")
}

model shop_trustpilot {
  id             BigInt    @id @default(autoincrement())
  shop_id        BigInt    @unique(map: "shop_trustpilot_shop_id_unique")
  score          Decimal?  @db.Decimal(4, 2)
  total_reviews  Int?
  url            String?   @db.VarChar(255)
  trust_score    String?   @db.VarChar(255)
  reviews_1_star Int?
  reviews_2_star Int?
  reviews_3_star Int?
  reviews_4_star Int?
  reviews_5_star Int?
  last_synced_at DateTime? @db.Timestamp(0)
  created_at     DateTime? @db.Timestamp(0)
  updated_at     DateTime? @db.Timestamp(0)

  @@index([last_synced_at], map: "shop_trustpilot_last_synced_at_index")
  @@index([score], map: "shop_trustpilot_score_index")
  @@index([total_reviews], map: "shop_trustpilot_total_reviews_index")
}

model shopifyAdditionalStore {
  id                 BigInt    @id @default(autoincrement())
  userId             BigInt    @map("user_id")
  shopifyDomain      String    @map("shopify_domain") @db.VarChar(255)
  shopifyAccessToken String    @map("shopify_access_token") @db.VarChar(255)
  isPrimary          Boolean   @default(false) @map("is_primary")
  createdAt          DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt          DateTime? @map("updated_at") @db.Timestamp(0)
  deletedAt          DateTime? @map("deleted_at") @db.Timestamp(0)

  @@map("shopify_additional_stores")
}

model shopifyAppIntegration {
  id             BigInt    @id @default(autoincrement())
  shopDomain     String    @unique(map: "shopify_app_integrations_shop_domain_unique") @map("shop_domain") @db.VarChar(255)
  accessToken    String    @map("access_token")
  scopes         String
  installedAt    DateTime  @map("installed_at") @db.Timestamp(0)
  lastAccessedAt DateTime? @map("last_accessed_at") @db.Timestamp(0)
  active         Boolean   @default(true)
  appMetadata    Json?     @map("app_metadata") @db.Json
  createdAt      DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt      DateTime? @map("updated_at") @db.Timestamp(0)
  userId         BigInt?   @map("user_id")

  @@index([active], map: "shopify_app_integrations_active_index")
  @@index([userId], map: "shopify_app_integrations_user_id_index")
  @@map("shopify_app_integrations")
}

model shopifyApp {
  id            BigInt    @id @default(autoincrement())
  element       String    @db.VarChar(255)
  name          String    @db.VarChar(255)
  icon          String    @db.VarChar(255)
  link          String    @db.VarChar(255)
  createdAt     DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime? @map("updated_at") @db.Timestamp(6)
  categories    Json?
  token         String?   @db.VarChar(255)
  vendorName    String?   @map("vendor_name") @db.VarChar(255)
  averageRating Decimal?  @map("average_rating") @db.Decimal(3, 1)
  reviewCount   Int?      @map("review_count")
  installs      Int?
  description   String?
  lastSyncedAt  DateTime? @map("last_synced_at") @db.Timestamp(0)

  @@index([averageRating], map: "shopify_apps_average_rating_index")
  @@index([installs], map: "shopify_apps_installs_index")
  @@index([reviewCount], map: "shopify_apps_review_count_index")
  @@map("shopify_apps")
}

model shopify_apps_elements {
  id             BigInt    @id @default(autoincrement())
  shopify_app_id BigInt
  element        String    @db.VarChar(255)
  created_at     DateTime? @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
}

model shopify_sales {
  id               BigInt    @id @default(autoincrement())
  product_id       String    @db.VarChar(255)
  product_title    String    @db.VarChar(255)
  product_img      String
  product_handle   String    @db.VarChar(255)
  variant_name     String?   @db.VarChar(255)
  price            Float
  shopify_shop_url String    @db.VarChar(255)
  order_hash       String    @db.VarChar(255)
  currency         String    @default("USD") @db.VarChar(255)
  sold_at          DateTime? @db.Timestamp(6)
  created_at       DateTime? @db.Timestamp(6)
  updated_at       DateTime? @db.Timestamp(6)

  @@index([created_at])
  @@index([currency])
  @@index([order_hash])
  @@index([product_id])
  @@index([shopify_shop_url])
}

model shopify_shops {
  id             BigInt    @id @default(autoincrement())
  user_id        BigInt?
  url            String    @db.VarChar(255)
  shopify_url    String    @db.VarChar(255)
  screenshot     String?   @db.VarChar(250)
  locale         String    @db.VarChar(255)
  country        String    @db.VarChar(255)
  theme          String    @db.VarChar(255)
  merchant_name  String?   @db.VarChar(255)
  currency       String    @db.VarChar(255)
  pixels         String?
  apps           String?
  meta_ads       String?
  products       String?
  best_products  String?
  products_count Int?
  disabled       Int       @default(0)
  whois_at       DateTime? @db.Timestamp(6)
  token          String?   @map("_token") @db.VarChar(255)
  created_at     DateTime? @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  deleted_at     DateTime? @db.Timestamp(6)
  migrated       Int       @default(0) @db.SmallInt

  @@index([migrated])
  @@index([url])
  @@index([user_id])
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model shop {
  id                  BigInt    @id @default(autoincrement())
  url                 String    @db.VarChar(255)
  shopifyUrl          String    @map("shopify_url") @db.VarChar(255)
  screenshot          String?   @db.VarChar(250)
  locale              String    @db.VarChar(255)
  country             String    @db.VarChar(255)
  theme               String    @db.VarChar(255)
  schemaName          String?   @map("schema_name") @db.VarChar(255)
  schemaVersion       String?   @map("schema_version") @db.VarChar(255)
  merchantName        String?   @map("merchant_name") @db.VarChar(255)
  currency            String    @db.VarChar(255)
  pixels              String?
  apps                String?
  productsCount       Int?      @map("products_count")
  disabled            Int       @default(0)
  shopScannedAt       DateTime? @default(now()) @map("shop_scanned_at") @db.Timestamp(6)
  whoisAt             DateTime? @map("whois_at") @db.Timestamp(6)
  token               String?   @map("_token") @db.VarChar(255)
  createdAt           DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime? @map("updated_at") @db.Timestamp(6)
  deletedAt           DateTime? @map("deleted_at") @db.Timestamp(6)
  whMd5               String?   @map("wh_md5") @db.VarChar(255)
  whUpdatedAt         DateTime? @map("wh_updated_at") @db.Timestamp(6)
  whStats             Json?     @map("wh_stats") @db.Json
  metaTitle           String?   @map("meta_title")
  metaDescription     String?   @map("meta_description")
  fbPageId            String?   @map("fb_page_id") @db.VarChar(255)
  activeAds           Int       @default(0) @map("active_ads")
  allAds              Int       @default(0) @map("all_ads")
  adsUpdatedAt        DateTime? @map("ads_updated_at") @db.Timestamp(6)
  fonts               String?
  colors              String?
  themeStyleUpdatedAt DateTime? @map("theme_style_updated_at") @db.Timestamp(0)
  appsLastSyncedAt    DateTime? @map("apps_last_synced_at") @db.Timestamp(0)

  userShops           userShop[]
  products            product[]
  categories          shopCategory[]
  traffic             traffic[]

  @@index([createdAt], map: "idx_shops_created_at")
  @@index([url], map: "idx_shops_url")
  @@index([currency], map: "shops_currency_idx")
  @@index([disabled], map: "shops_disabled_index")
  @@index([fbPageId], map: "shops_fb_page_id_idx")
  @@index([productsCount], map: "shops_products_count_idx")
  @@index([shopScannedAt], map: "shops_shop_scanned_at_idx")
  @@index([url], map: "shops_url_index")
  @@map("shops")
}

model shops_ads_active_history {
  id               BigInt    @id @default(autoincrement())
  shop_id          BigInt
  active_ads_count Int       @default(0)
  all_ads_count    Int       @default(0)
  created_at       DateTime? @db.Timestamp(6)
  updated_at       DateTime? @db.Timestamp(6)

  @@index([shop_id])
}

model shopCategory {
  id         BigInt    @id @default(autoincrement())
  categoryId BigInt    @map("category_id")
  shopId     BigInt    @map("shop_id")
  createdAt  DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt  DateTime? @map("updated_at") @db.Timestamp(0)

  category   category  @relation(fields: [categoryId], references: [id])
  shop       shop      @relation(fields: [shopId], references: [id])

  @@index([categoryId], map: "shops_categories_category_id_index")
  @@index([shopId], map: "shops_categories_shop_id_index")
  @@map("shops_categories")
}

model shops_fb_pages {
  id         BigInt    @id @default(autoincrement())
  shop_id    BigInt
  fb_page_id BigInt
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
}

model shops_shopify_apps {
  id             BigInt    @id @default(autoincrement())
  shop_id        BigInt
  shopify_app_id BigInt
  created_at     DateTime? @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  source         String    @default("manual") @db.VarChar(255)

  @@index([source], map: "shops_shopify_apps_source_index")
}

model storeleads {
  id                  BigInt    @id @default(autoincrement())
  shop_name           String    @db.VarChar(255)
  shop_id             String?   @db.VarChar(255)
  done_processing     Int       @default(0) @db.SmallInt
  created_at          DateTime? @db.Timestamp(6)
  updated_at          DateTime? @db.Timestamp(6)
  domain              String?   @unique(map: "storeleads_domain_unique") @db.VarChar(255)
  categories          String?
  city                String?   @db.VarChar(255)
  country_code        String?   @db.VarChar(2)
  created_date        DateTime? @db.Date
  state               String?   @db.VarChar(255)
  status              String    @default("Active") @db.VarChar(255)
  emails              String?
  facebook            String?   @db.VarChar(255)
  instagram           String?   @db.VarChar(255)
  pinterest           String?   @db.VarChar(255)
  pinterest_followers Int?
  tiktok              String?   @db.VarChar(255)
  tiktok_followers    Int?
  twitter             String?   @db.VarChar(255)
  twitter_followers   Int?
  youtube             String?   @db.VarChar(255)
  youtube_followers   Int?
  plan                String?   @db.VarChar(255)
  platform            String    @default("Shopify") @db.VarChar(255)
  platform_rank       Int?
  rank                Int?
  import_source       String    @default("csv") @db.VarChar(255)
  imported_at         DateTime? @db.Timestamp(0)

  @@index([created_at], map: "idx_store_leads_created_at")
  @@index([country_code], map: "storeleads_country_code_index")
  @@index([imported_at], map: "storeleads_imported_at_index")
  @@index([platform], map: "storeleads_platform_index")
  @@index([status], map: "storeleads_status_index")
}

model storeleads_state {
  id          BigInt    @id @default(autoincrement())
  next_cursor String?   @db.VarChar(255)
  created_at  DateTime? @db.Timestamp(6)
  updated_at  DateTime? @db.Timestamp(6)
}

model subscription_items {
  id              BigInt    @id @default(autoincrement())
  subscription_id BigInt
  stripe_id       String    @db.VarChar(255)
  stripe_plan     String    @db.VarChar(255)
  quantity        Int?
  created_at      DateTime? @db.Timestamp(6)
  updated_at      DateTime? @db.Timestamp(6)

  @@unique([subscription_id, stripe_plan], map: "subscription_items_subscription_id_stripe_plan_idx")
  @@index([stripe_id])
}

model subscription {
  id          BigInt    @id @default(autoincrement())
  userId      BigInt    @map("user_id")
  name        String    @db.VarChar(255)
  stripeId    String    @map("stripe_id") @db.VarChar(255)
  stripeStatus String   @map("stripe_status") @db.VarChar(255)
  stripePlan  String?   @map("stripe_plan") @db.VarChar(255)
  quantity    Int?
  discount    String?   @db.VarChar(255)
  trialEndsAt DateTime? @map("trial_ends_at") @db.Timestamp(6)
  endsAt      DateTime? @map("ends_at") @db.Timestamp(6)
  createdAt   DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)

  user        user      @relation(fields: [userId], references: [id])

  @@index([userId, stripeStatus], map: "subscriptions_user_id_stripe_status_idx")
  @@map("subscriptions")
}

model suggested_products {
  id               BigInt    @id @default(autoincrement())
  title            String    @db.VarChar(255)
  vendor           String?   @db.VarChar(255)
  price            String    @db.VarChar(255)
  compare_at_price String?   @db.VarChar(255)
  currency         String    @default("USD") @db.VarChar(10)
  image_url        String
  product_url      String
  source_shop_url  String?
  shop_id          BigInt?
  product_id       BigInt?
  source_type      String    @default("manual") @db.VarChar(255)
  sort_order       Int       @default(0)
  is_active        Boolean   @default(true)
  added_by_user_id BigInt
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)

  @@index([is_active, sort_order], map: "suggested_products_is_active_sort_order_index")
  @@index([product_id], map: "suggested_products_product_id_index")
  @@index([shop_id], map: "suggested_products_shop_id_index")
  @@index([source_type], map: "suggested_products_source_type_index")
}

model table_locks {
  id         Int      @id @default(autoincrement())
  user_id    Int
  table_name String   @db.VarChar(255)
  created_at DateTime @db.Timestamp(6)
  updated_at DateTime @db.Timestamp(6)
}

model temporary_sales {
  id              BigInt    @id @default(autoincrement())
  product_id      String    @db.VarChar(255)
  product_title   String    @db.VarChar(255)
  product_img     String    @db.VarChar(255)
  product_handle  String    @db.VarChar(255)
  variant_name    String?   @db.VarChar(255)
  price           Float
  shopify_shop_id BigInt
  order_hash      String
  created_at      DateTime? @db.Timestamp(6)
  updated_at      DateTime? @db.Timestamp(6)

  @@index([shopify_shop_id])
}

model theme_configs {
  id                  BigInt    @id @default(autoincrement())
  generate_product_id BigInt
  theme_key           String    @default("theme_v4") @db.VarChar(50)
  name                String?   @db.VarChar(255)
  is_active           Boolean   @default(true)
  global_settings     Json?     @db.Json
  created_at          DateTime? @db.Timestamp(0)
  updated_at          DateTime? @db.Timestamp(0)

  @@unique([generate_product_id, theme_key], map: "theme_configs_generate_product_id_theme_key_unique")
  @@index([theme_key], map: "theme_configs_theme_key_index")
}

model theme_exports {
  id            BigInt    @id @default(autoincrement())
  user_id       BigInt
  shop_url      String    @db.VarChar(255)
  merchant_name String?   @db.VarChar(255)
  screenshot    String?   @db.VarChar(255)
  shop_theme    String    @db.VarChar(255)
  fonts         String
  colors        String
  file          String    @db.VarChar(255)
  created_at    DateTime? @db.Timestamp(6)
  updated_at    DateTime? @db.Timestamp(6)

  @@index([created_at], map: "theme_exports_created_at_index")
  @@index([shop_theme], map: "theme_exports_shop_theme_index")
  @@index([shop_url], map: "theme_exports_shop_url_index")
  @@index([user_id])
}

model theme_section_configs {
  id              BigInt    @id @default(autoincrement())
  theme_config_id BigInt
  template_type   String    @db.VarChar(50)
  section_id      String    @db.VarChar(100)
  section_type    String    @db.VarChar(100)
  display_name    String?   @db.VarChar(255)
  position        Int       @default(0)
  is_enabled      Boolean   @default(true)
  settings        Json?     @db.Json
  blocks          Json?     @db.Json
  block_order     Json?     @db.Json
  custom_css      Json?     @db.Json
  created_at      DateTime? @db.Timestamp(0)
  updated_at      DateTime? @db.Timestamp(0)

  @@unique([theme_config_id, template_type, section_id], map: "unique_section")
  @@index([position], map: "theme_section_configs_position_index")
  @@index([theme_config_id, template_type], map: "theme_section_configs_theme_config_id_template_type_index")
}

model theme_section_types {
  id                  BigInt    @id @default(autoincrement())
  theme_key           String    @db.VarChar(50)
  section_type        String    @db.VarChar(100)
  display_name        String    @db.VarChar(255)
  category            String    @default("content") @db.VarChar(50)
  description         String?
  supported_templates Json?     @db.Json
  default_settings    Json?     @db.Json
  block_types         Json?     @db.Json
  icon                String?   @db.VarChar(255)
  is_required         Boolean   @default(false)
  max_instances       Int?
  created_at          DateTime? @db.Timestamp(0)
  updated_at          DateTime? @db.Timestamp(0)

  @@unique([theme_key, section_type], map: "theme_section_types_theme_key_section_type_unique")
  @@index([category], map: "theme_section_types_category_index")
  @@index([theme_key], map: "theme_section_types_theme_key_index")
}

model todo {
  id          BigInt    @id @default(autoincrement())
  userId      BigInt    @map("user_id")
  details     String
  deletedAt   DateTime? @map("deleted_at") @db.Timestamp(6)
  createdAt   DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)
  defaultTask Int?      @map("default_task")
  checked     Int?

  @@index([userId], map: "todos_user_id_idx")
  @@map("todos")
}

model top_ranks {
  id               Int       @id @default(autoincrement())
  type             Int
  uuid             String    @db.VarChar(50)
  total_price      Float?    @db.Real
  shopify_shop_url String?   @db.VarChar(255)
  nb_sales         Int?
  currency         String    @db.VarChar(20)
  updated_at       DateTime? @db.Timestamp(6)
  created_at       DateTime? @db.Timestamp(6)
  product_handle   String?   @db.VarChar(255)
  product_img      String?
  product_title    String?   @db.VarChar(255)
  sold_count       Int?
  price            Float?

  @@index([uuid])
}

model traffic {
  id                   Int      @id @default(autoincrement())
  shopId               BigInt?  @map("shop_id")
  visits               String
  growthRate           Int?     @map("growth_rate")
  scale                Int?
  dates                String
  lastLastMonthVisits  Int?     @map("last_last_month_visits")
  lastMonthVisits      Int      @map("last_month_visits")
  estimatedOrder       Int      @map("estimated_order")
  estimatedMonthly     Int      @map("estimated_monthly")
  percentage           Int?
  trend                Int?
  shopUrl              String   @map("shop_url") @db.VarChar(255)
  createdAt            DateTime @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime @map("updated_at") @db.Timestamp(6)
  countries            Json?    @db.Json
  sources              Json?    @db.Json
  mainSource           String?  @map("main_source") @db.VarChar(255)
  visitsShare          Decimal? @map("visits_share") @db.Decimal(5, 2)
  avgPrice             Decimal? @map("avg_price") @db.Decimal(8, 2)
  social               Json?    @db.Json

  shop                 shop?    @relation(fields: [shopId], references: [id])

  @@index([createdAt], map: "idx_traffic_created_at")
  @@index([estimatedOrder], map: "idx_traffic_estimated_order")
  @@index([createdAt], map: "traffic_created_at_idx")
  @@index([estimatedMonthly], map: "traffic_estimated_monthly_index")
  @@index([shopId], map: "traffic_shop_id_idx")
  @@index([shopUrl], map: "traffic_shop_url_idx")
}

model user_domains {
  id          BigInt    @id @default(autoincrement())
  user_id     BigInt
  domain      String    @db.VarChar(255)
  verified_at DateTime? @db.Timestamp(0)
  is_active   Boolean   @default(true)
  created_at  DateTime? @db.Timestamp(0)
  updated_at  DateTime? @db.Timestamp(0)

  @@unique([user_id, domain], map: "user_domains_user_id_domain_unique")
  @@index([user_id, is_active], map: "user_domains_user_id_is_active_index")
}

model user_responses {
  id                 BigInt    @id @default(autoincrement())
  user_id            BigInt?
  tried_dropshipping String
  goals              String?
  discovery_method   String?
  created_at         DateTime? @db.Timestamp(6)
  updated_at         DateTime? @db.Timestamp(6)
}

model user_searches {
  id         BigInt    @id @default(autoincrement())
  user_id    BigInt
  model_name String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
  deleted_at DateTime? @db.Timestamp(0)

  @@index([model_name], map: "user_searches_model_name_index")
}

model userShare {
  id        BigInt    @id @default(autoincrement())
  userId    BigInt    @unique @map("user_id")
  shareUuid String    @unique(map: "user_shares_share_uuid_unique") @map("share_uuid") @db.VarChar(6)
  createdAt DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt DateTime? @map("updated_at") @db.Timestamp(0)

  user      user      @relation(fields: [userId], references: [id])

  @@map("user_shares")
}

model userShop {
  id        BigInt    @id @default(autoincrement())
  userId    BigInt    @map("user_id")
  shopId    BigInt    @map("shop_id")
  createdAt DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt DateTime? @map("updated_at") @db.Timestamp(6)
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(6)

  shop      shop      @relation(fields: [shopId], references: [id])

  @@unique([userId, shopId], map: "user_shops_user_id_shop_id_idx")
  @@map("user_shops")
}

model user_uploaded_images {
  id            BigInt    @id @default(autoincrement())
  user_id       BigInt
  filename      String    @db.VarChar(255)
  path          String    @db.VarChar(255)
  url           String    @db.VarChar(255)
  mime_type     String    @db.VarChar(50)
  size          Int
  used_in_video Boolean   @default(false)
  last_used_at  DateTime? @db.Timestamp(0)
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)

  @@index([created_at], map: "user_uploaded_images_created_at_index")
  @@index([user_id], map: "user_uploaded_images_user_id_index")
  @@index([user_id, used_in_video], map: "user_uploaded_images_user_id_used_in_video_index")
}

model user {
  id                     BigInt    @id @default(autoincrement())
  name                   String    @db.VarChar(255)
  email                  String    @unique(map: "users_email_idx") @db.VarChar(255)
  shopifyDomain          String?   @map("shopify_domain") @db.VarChar(255)
  shopifyAccessToken     String?   @map("shopify_access_token") @db.VarChar(255)
  emailVerifiedAt        DateTime? @map("email_verified_at") @db.Timestamp(6)
  verifyToken            String?   @map("verify_token") @db.VarChar(255)
  password               String    @db.VarChar(255)
  backupCode             String    @map("backup_code") @db.VarChar(255)
  rememberToken          String?   @map("remember_token") @db.VarChar(100)
  cancelToken            String    @map("cancel_token") @db.VarChar(255)
  balanceShopExporter    Int       @default(0) @map("balance_shop_exporter")
  balanceProductExporter Int       @default(0) @map("balance_product_exporter")
  alreadySeenVideo       Int       @default(0) @map("already_seen_video") @db.SmallInt
  isAdmin                Int       @default(0)
  isBanned               Int       @default(0)
  createdAt              DateTime? @map("created_at") @db.Timestamp(6)
  updatedAt              DateTime? @map("updated_at") @db.Timestamp(6)
  startOfferDate         DateTime? @map("start_offer_date") @db.Timestamp(6)
  stripeId               String?   @map("stripe_id") @db.VarChar(255)
  cardBrand              String?   @map("card_brand") @db.VarChar(255)
  cardLastFour           String?   @map("card_last_four") @db.VarChar(4)
  trialEndsAt            DateTime? @map("trial_ends_at") @db.Timestamp(6)
  cardHolder             String?   @map("card_holder") @db.VarChar(255)
  type                   String    @default("email") @db.VarChar(255)
  lastLogin              DateTime? @map("last_login") @db.Timestamp(6)
  deletedAt              DateTime? @map("deleted_at") @db.Timestamp(6)
  lang                   String    @default("fr") @db.VarChar(5)
  balanceGenerateProduct Int       @default(0) @map("balance_generate_product")
  balanceImportTheme     Int       @default(0) @map("balance_import_theme")
  viewedCompetitorAds    Boolean   @default(false) @map("viewed_competitor_ads")
  mainThemeId            String?   @map("main_theme_id") @db.VarChar(255)
  shopifySetupCompleted  Boolean   @default(false) @map("shopify_setup_completed")
  utmSource              String?   @map("utm_source") @db.VarChar(255)
  magicLinkToken         String?   @map("magic_link_token") @db.VarChar(255)
  magicLinkExpiresAt     DateTime? @map("magic_link_expires_at") @db.Timestamp(0)
  shopifyDomainLinkedAt  DateTime? @map("shopify_domain_linked_at") @db.Timestamp(0)
  balanceVideoGeneration Int       @default(0) @map("balance_video_generation")
  balanceImageGeneration Int       @default(0) @map("balance_image_generation")
  lastYearlyCreditAt     DateTime? @map("last_yearly_credit_at") @db.Timestamp(0)
  nextCreditRenewalAt    DateTime? @map("next_credit_renewal_at") @db.Timestamp(0)
  challengeRegisteredAt  DateTime? @map("challenge_registered_at") @db.Timestamp(0)
  q4BannerDismissed      Boolean   @default(false) @map("q4_banner_dismissed")
  bfBannerDismissed      Boolean   @default(false) @map("bf_banner_dismissed")

  subscriptions          subscription[]
  userShares             userShare[]

  @@index([createdAt], map: "idx_users_created_at")
  @@index([nextCreditRenewalAt], map: "users_next_credit_renewal_at_index")
  @@index([stripeId], map: "users_stripe_id_idx")
  @@map("users")
}
