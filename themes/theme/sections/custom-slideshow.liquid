 {% stylesheet %}
  .button--primary {
    border: none;
  }
.slideshow-container {
    position: relative;
    max-width: 100%;
    overflow: hidden;
    height: 90vh;
}

  .slide {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    background-size: cover;
    background-position: center;
  }

  .slide.active {
    opacity: 1;
    z-index: 1;
  }

  .slide-caption {
    position: absolute;
    color: white;
    width: 100%;
    height: 100%;
  }

  .slidercptn-content {
    display: grid;
    height: 100%;
    width: 100%;
    padding: 50px;
  }

  .slideshow_heading {
    font-size: 5rem;
    margin: 20px 0;
  }

  .nav-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    font-size: 2rem;
    padding: 0.5rem 1rem;
    cursor: pointer;
    z-index: 2;
    user-select: none;
    border-radius: 4px;
  }

  .prev {
    left: 20px;
  }

  .next {
    right: 20px;
  }

  .dots {
    position: absolute;
    bottom: 30px;
    right: 0;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 111;
  }

  .dot {
    position: relative;
    width: 40px;
    height: 50px;
    text-align: center;
    cursor: pointer;
  }

  .dot svg {
    transform: rotate(-90deg);
    width: 40px;
    height: 40px;
  }

  .dot circle {
    fill: none;
    stroke: rgba(255, 255, 255, 0.3);
    stroke-width: 3;
  }

  .dot circle.progress {
    stroke: white;
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    transition: stroke-dashoffset linear;
  }

  .dot-number {
    color: white;
    font-size: 13px;
    margin-top: -5px;
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
    font-weight: 600;
  }

  .slide-caption.caption-left {
    left: 40px !important;
    transform: translateX(0) translateY(-50%);
  }

  /* Desktop Alignment Classes */
  .sm\:align-items-start { align-items: flex-start; text-align:left; }
  .sm\:justify-content-start { justify-content: flex-start; text-align:left; }
  .sm\:align-items-start-center { align-items: flex-start; justify-content: center; text-align:center; }
  .sm\:justify-content-center { justify-content: center; text-align:center; }
  .sm\:align-items-start-end { align-items: flex-start; justify-content: flex-end; text-align:right; }
  .sm\:align-items-center-start { align-items: center; justify-content: flex-start; text-align:left; }
  .sm\:align-items-center { align-items: center;}
  .sm\:justify-content-center { justify-content: center; text-align:center; }
  .sm\:align-items-center-end { align-items: center; justify-content: flex-end; text-align:right; }
  .sm\:align-items-end-start { align-items: flex-end; justify-content: flex-start; text-align:right; }
  .sm\:align-items-end { align-items: flex-end;}
  .sm\:justify-content-end { justify-content: flex-end; text-align:right;}

  /* Mobile Styles */
  @media screen and (max-width: 768px) {
    /* Mobile alignment classes */
    .align-start-mbl { align-items: flex-start; }
    .justify-start-mbl { justify-content: flex-start; text-align: left; }

    .align-center-mbl { align-items: center; }
    .justify-center-mbl { justify-content: center; text-align: center; }

    .align-end-mbl { align-items: flex-end; }
    .justify-end-mbl { justify-content: flex-end; text-align: right; }

    .slideshow_heading {
      font-size: 3.5rem;
    }
 .slideshow-container {
    height: 75vh;
}   
  }
{% endstylesheet %}
<div class="slideshow-container" id="slideshow">
  {% for block in section.blocks %}



  
    {% assign desktop_image = block.settings.desktop_image %}
    {% assign mobile_image = block.settings.mobile_image %}



  
    {% assign color = block.settings.content_color %}
    {% assign btn_bg = block.settings.button_bg_color %}
    {% assign btn_text = block.settings.button_text_color %}
    {% assign mobile_position = block.settings.mobile_text_position %}
    {% assign desktop_position = block.settings.desktop_text_position %}

    {% assign final_desktop_image = block.settings.default_desk_image | asset_url %}
     {% assign final_mobile_image = block.settings.default_mob_image | asset_url %}

    {% if desktop_image != blank %}
      {% assign final_desktop_image = desktop_image | img_url: 'master' %}
    {% elsif mobile_image != blank %}
      {% assign final_desktop_image = mobile_image | img_url: 'master' %}
    {% endif %}

    {% if mobile_image != blank %}
      {% assign final_mobile_image = mobile_image | img_url: 'master' %}
    {% elsif desktop_image != blank %}
      {% assign final_mobile_image = desktop_image | img_url: 'master' %}
    
     
    {% endif %}

    <div class="slide {% if forloop.first %}active{% endif %}" 
         data-mobile-image="{{ final_mobile_image }}" 
         style="background-image: url('{{ final_desktop_image }}');">
      <div class="slide-caption" style="color: {{ color }};">
        <div class="slidercptn-content {{ mobile_position }} {{ desktop_position }}">
          <div class="slider-content">  
            {% if block.settings.subheading != blank %}
              <span class="slideshow_subheading" style="color: {{ color }};">{{ block.settings.subheading }}</span>
            {% endif %}
            {% if block.settings.heading != blank %}
              <h2 class="slideshow_heading" style="color: {{ color }};">{{ block.settings.heading }}</h2>
            {% endif %}
            {% if block.settings.description != blank %}
              <p class="slideshow_desc">{{ block.settings.description }}</p>
            {% endif %}
            {% if block.settings.button_text != blank and block.settings.button_link != blank %}
              <a href="{{ block.settings.button_link }}" class="button button--primary"
                 style="background-color: {{ btn_bg }}; color: {{ btn_text }};">
                {{ block.settings.button_text }}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
  <div class="dots" id="dots"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    function updateMobileImages() {
      // Get all slide elements
      const slides = document.querySelectorAll('.slide');
      // Loop through each slide
      slides.forEach(function(slide) {
        // Get the mobile image data attribute
        const mobileImage = slide.getAttribute('data-mobile-image');
        // Check if the screen size is smaller than or equal to 768px
        if (window.innerWidth <= 768) {
          // Set the background image for mobile
          slide.style.backgroundImage = 'url(' + mobileImage + ')';
        } else {
          // Set the background image for desktop (fallback)
          slide.style.backgroundImage = 'url(' + slide.style.backgroundImage + ')';
        }
      });
    }

    // Initial image update
    updateMobileImages();
    
    // Update images on window resize
    window.addEventListener('resize', updateMobileImages);
  });
</script>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const slides = document.querySelectorAll('.slide');
    const dotsContainer = document.getElementById('dots');
    let currentIndex = 0;
    let progressInterval;
    const slideDelay = 5000;

    if (!slides.length || !dotsContainer) return;

    // Clear existing dots (important if script reinitializes)
    dotsContainer.innerHTML = '';

    // Create dots with number and progress ring
    slides.forEach((_, index) => {
      const dot = document.createElement('div');
      dot.classList.add('dot');
      dot.innerHTML = `
        <svg width="40" height="40" viewBox="0 0 40 40">
          <circle cx="20" cy="20" r="16" stroke="#ddd" stroke-width="4" fill="none"></circle>
          <circle class="progress" cx="20" cy="20" r="16" stroke="#000" stroke-width="4" fill="none" stroke-dasharray="100" stroke-dashoffset="100"></circle>
        </svg>
        <span class="dot-number">${index + 1}</span>
      `;
      dot.addEventListener('click', () => {
        goToSlide(index);
      });
      dotsContainer.appendChild(dot);
    });

    const dots = document.querySelectorAll('.dot');
    const progressCircles = document.querySelectorAll('.dot .progress');

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
      currentIndex = index;
      resetProgressAnimation();
    }

    function nextSlide() {
      const newIndex = (currentIndex + 1) % slides.length;
      showSlide(newIndex);
    }

    function prevSlide() {
      const newIndex = (currentIndex - 1 + slides.length) % slides.length;
      showSlide(newIndex);
    }

    function goToSlide(index) {
      showSlide(index);
    }

    function resetProgressAnimation() {
      // Reset all progress rings
      progressCircles.forEach(circle => {
        circle.style.transition = 'none';
        circle.style.strokeDashoffset = 100;
      });

      // Animate current one
      requestAnimationFrame(() => {
        const circle = progressCircles[currentIndex];
        circle.style.transition = `stroke-dashoffset ${slideDelay}ms linear`;
        circle.style.strokeDashoffset = 0;
      });

      clearInterval(progressInterval);
      progressInterval = setInterval(() => {
        nextSlide();
      }, slideDelay);
    }

    // Pause autoplay on hover
    const slideshow = document.getElementById('slideshow');
    slideshow.addEventListener('mouseenter', () => clearInterval(progressInterval));
    slideshow.addEventListener('mouseleave', resetProgressAnimation);

    showSlide(0); // Initialize first slide and progress
  });
</script>



{% schema %}
{
  "name": "Custom Slideshow",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
      "type": "text",
      "id": "default_desk_image",
      "label": "default Desktop Image",
      "default":"3.webp",
      "info":"same name image need to save in assets and if you want change please select image from below Image Picker"
    },{
          "type": "image_picker",
          "id": "desktop_image",
          "label": "Desktop Image"
        },{
      "type": "text",
      "id": "default_mob_image",
      "label": "default Mobile Image",
      "default":"2.png",
      "info":"same name image need to save in assets and if you want change please select image from below Image Picker"
    },
         {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "Mobile Image"
        },
        {
          "type": "text",
          "id": "subheading",
          "label": "Subheading",
          "default": "Sub Heading"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Main Heading"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Read More"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "color",
          "id": "content_color",
          "label": "Content Color",
          "default": "#ffffff"
        },
        {
  "type": "color",
  "id": "button_bg_color",
  "label": "Button Background Color",
  "default": "#000000"
},
{
  "type": "color",
  "id": "button_text_color",
  "label": "Button Text Color",
  "default": "#ffffff"
},
      
{
  "type": "select",
  "id": "desktop_text_position",
  "label": "Desktop content position",
  "options": [
    {
      "value": "sm:align-items-start sm:justify-content-start",
      "label": "Top left"
    },
    {
      "value": "sm:align-items-start sm:justify-content-center",
      "label": "Top center"
    },
    {
      "value": "sm:align-items-start sm:justify-content-end",
      "label": "Top right"
    },
    {
      "value": "sm:align-items-center sm:justify-content-start",
      "label": "Middle left"
    },
    {
      "value": "sm:align-items-center sm:justify-content-center",
      "label": "Middle center"
    },
    {
      "value": "sm:align-items-center sm:justify-content-end",
      "label": "Middle right"
    },
    {
      "value": "sm:align-items-end sm:justify-content-start",
      "label": "Bottom left"
    },
    {
      "value": "sm:align-items-end sm:justify-content-center",
      "label": "Bottom center"
    },
    {
      "value": "sm:align-items-end sm:justify-content-end",
      "label": "Bottom right"
    }
  ],
  "default": "sm:align-items-center sm:justify-content-center"
},
{
  "type": "select",
  "id": "mobile_text_position",
  "label": "Mobile content position",
  "options": [
    {
      "value": "align-start-mbl justify-start-mbl",
      "label": "Top left"
    },
    {
      "value": "align-start-mbl justify-center-mbl",
      "label": "Top center"
    },
    {
      "value": "align-start-mbl justify-end-mbl",
      "label": "Top right"
    },
    {
      "value": "align-center-mbl justify-start-mbl",
      "label": "Middle left"
    },
    {
      "value": "align-center-mbl justify-center-mbl",
      "label": "Middle center"
    },
    {
      "value": "align-center-mbl justify-end-mbl",
      "label": "Middle right"
    },
    {
      "value": "align-end-mbl justify-start-mbl",
      "label": "Bottom left"
    },
    {
      "value": "align-end-mbl justify-center-mbl",
      "label": "Bottom center"
    },
    {
      "value": "align-end-mbl justify-end-mbl",
      "label": "Bottom right"
    }
  ],
  "default": "align-center-mbl justify-center-mbl"
}
        
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Custom Slideshow",
      "category": "Slideshow",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}